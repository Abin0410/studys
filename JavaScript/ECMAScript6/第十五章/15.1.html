<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
</head>
<body>
  <script>
    /*
      # Iterator

      ## Iterator遍历器概念
      js现有表示“集合”的数据结构，主要是数组（`Array`）、对象（`Object`）、`Map`、`Set`这四种数据集合。还可以组合使用它们，
      定义自己的数据结构，例如数组的成员是`Map`，`Map`的成员是对象。这样就需要一种统一的接口机制，来处理所有不同的数据结构。

      遍历器（Iterator）就是这样的一种机制。它是一种接口，为各种不同的数据结构提供统一的访问机制。任何数据结构只需要部署
      Iterator接口，就可以完成遍历操作。

      Iterator的作用有三个：一是为各种数据结构，提供一个统一的、简便的访问接口；二是使得数据结构的成员能够按某种次序排序；
      三是ES6加入了一种新的遍历方法`for...of`循环，Iterator接口主要提供给`for...of`使用。

      Iterator的遍历过程有以下三点。
      1. 创建一个指针对象，指向当前数据结构的开始位置。实际上，遍历器对象本质上就是一个指针对象罢了。
      2. 第一次调用指针对象的`next`方法，可以将指针指向数据结构的第一个成员。
      3. 第二次调用指针对象的`next`方法，指针就指向数据结构的第二个成员。
      4. 不断调用指针对象的`next`方法，直到它指向数据结构的结束位置。

      每次调用`next`方法，都会返回数据结构的当前成员信息，也就是说，返回一个包含`value`和`done`两个属性的对象。`value`属性
      就是当前成员的值，`done`属性是一个布尔值，表示遍历是否结束。

      下面是模拟`next`方法返回值的例子：
      ```js
      var iterAtor = copyIterator(['a', 'b']);

      console.log(iterAtor.next()); // {value: "a", done: false}
      console.log(iterAtor.next()); // {value: "b", done: false}
      console.log(iterAtor.next()); // {value: undefined, done: true}

      function copyIterator(array) {
        var nextIndex = 0;

        return {
          next() {
            return nextIndex < array.length 
              ? { value: array[nextIndex++], done: false } 
              : { value: undefined, done: true }
          }
        }
      }
      ```
      上面的代码中定义了一个`copyIterator`函数，是一个遍历器生成函数，作用是返回一个遍历器对象。对数组`['a', 'b']`执行这个函数，
      就会返回这个数组的遍历器对象（也就是指针对象）`iterAtor`。

      指针对象的`next`方法，用于移动指针。开始的时候，指针指向数组的开始位置。每次调用`next`方法，指针就会指向数组的下一个成员。
      第一个调用的时候，就指向`a`；第二次调用，就指向了`b`。

      `next`方法返回一个对象，而这个对象就是当前数据成员的信息。这个对象有两个属性`value`和`done`，`value`属性返回的是当前位置
      的成员，`done`属性是一个布尔值，表示遍历是否结束，代表着是否还有必要再调用一次`next`方法。

      反正，调用指针对象的`next`方法，就可以遍历给定好的数据结构。

      Iterator只是把接口规格加到数据结构之上而已，所以，遍历器与它所遍历的那个数据结构是分开的，这样可以写出一个没有对应数据结构
      的遍历器对象，也可以说是，用遍历器对象模拟出数据结构。来看下面的例子：
      ```js
      var iterAtor = imitationId();

      console.log(iterAtor.next()); // {value: 0, done: false}
      console.log(iterAtor.next()); // {value: 1, done: false}

      function imitationId() {
        var index = 0;
        return {
          next() {
            return { value: index++, done: false };
          }
        }
      }
      ```
      上面的代码中是一个无限循环的遍历器对象的例子，遍历器生成函数`imitationId`，返回一个遍历器对象（也就是指针对象）。可以看到
      并没有对应的数据结构，也可以说是，遍历器对象自己描述了一个数据结构出来。
    */
    
  </script>
</body>
</html>