<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
</head>
<body>
  <script>
    /* 

      ## __proto__属性
      `__proto__`，用来读取或者设置当前对象的原型对象，实际上跟`prototype`一样的。所有浏览器都支持这个属性，包括IE11。
      这个属性只有浏览器有，在其他环境不一定有。从兼容性来看，都不要使用这个属性。

      `__proto__`调用的是`Object.prototype.__proto__`，具体实现的代码如下：
      ```js
      Object.defineProperty(Object.prototype, '__proto__', {
        get() {
          let _thisObj = Object(this);
          return Object.getPrototypeOf(_thisObj);
        },

        set(proto) {
          if (this === undefined || this === null) {
            throw new TypeError();
          }

          if (!isObject(this)) {
            return undefined;
          }

          if (!isObject(proto)) {
            return undefined;
          }

          let status = Reflect.setPrototypeOf(this, proto);

          if (!status) {
            throw new TypeError();
          }
        },
      });

      function isObject(value) {
        return Object(value) === value;
      }
      ```
      如果一个对象本身部署了`__proto__`属性，该属性的值就是对象的原型。
      ```js
      console.log(Object.getPrototypeOf({__proto__: null})); // null
      ```

      ## Object.setPrototypeOf()
      `Object.setPrototypeOf`方法的用处和`__proto__`是一样的，用于设置一个对象的原型对象，返回参数对象本身。
      ```js
      let proto = {};

      let obj2 = { x: 10 };

      otherProto.y = 20;
      otherProto.z = 40;

      Object.setPrototypeOf(obj2, otherProto);
      console.log(obj2.y); // 20
      console.log(obj2.z); // 40
      ```
      上面的代码将`Proto`对象设为`obj2`对象的原型，所以从`obj2`对象中可以读取`Proto`对象的属性。

      如果第一个参数不是对象的话，会自动转成对象，但是返回的还是第一个参数，这个操作并不会产生任何的效果。
      ```js
      console.log(Object.setPrototypeOf(1, {})); // 1
      console.log(Object.setPrototypeOf('foo', {})); // foo
      console.log(Object.setPrototypeOf(true, {})); // true

      console.log(Object.setPrototypeOf(1, {}) === 1); // true
      console.log(Object.setPrototypeOf('foo', {}) === 'foo'); // true
      console.log(Object.setPrototypeOf(true, {}) === true); // true
      ```
      由于`undefined`和`null`无法转成对象，如果第一个参数是`undefined`或`null`的话，会直接报错。
      ```js
      console.log(Object.setPrototypeOf(undefined, {}));
      // Object.setPrototypeOf called on null or undefined
      console.log(Object.setPrototypeOf(null, {}));
      // Object.setPrototypeOf called on null or undefined
      ```

      ## Object.getPrototypeOf()
      
      `Object.getPrototypeOf()`方法是用来读取一个对象的原型对象。
      ```js
      Object.getPrototypeOf(obj);
      ```
      看下面的例子：
      ```js
      function Person() {

      }

      let obj = new Person();

      console.log(Object.getPrototypeOf(obj) === Person.prototype); // true

      Object.setPrototypeOf(obj, Object.prototype);
      console.log(Object.getPrototypeOf(obj) === Person.prototype); // false
      ```
      如果参数不是对象，也会被自动转成对象。
      ```js
      console.log(Object.getPrototypeOf(1)); // Number {0, constructor: ƒ, toExponential: ƒ, toFixed: ƒ, toPrecision: ƒ,}
      console.log(Object.getPrototypeOf('foo')); // String {"", constructor: ƒ, anchor: ƒ, big: ƒ, blink: ƒ,}
      console.log(Object.getPrototypeOf(true)); // Boolean {false, constructor: ƒ, toString: ƒ, valueOf: ƒ}

      console.log(Object.getPrototypeOf(1) === Number.prototype); // true
      console.log(Object.getPrototypeOf('foo') === String.prototype); // true
      console.log(Object.getPrototypeOf(true) === Boolean.prototype); // true
      ```
    */
    
  </script>
</body>
</html>