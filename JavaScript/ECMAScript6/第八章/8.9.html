<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
</head>
<body>
  <script>
    /*
      数组的flat()，flatMap()
      当数组的成员还是一个数组的时候，`flat()`用于嵌套的数组"拉平"，变成一个一维数组，`flat()`方法返回一个
      新数组，对原数组没有影响。
      ```js
      const arr = [1, 2, [3, 4]];
      console.log(arr.flat()); // [1, 2, 3, 4]
      ```
      上面的代码中，原数组的成员里有一个数组，`flat()`方法将子数组的成员取出来，添加在原来的位置。

      `flat()`支持接受参数，如果想要"拉平"多层的嵌套数组，可以传一个整数作为参数，表示想要拉平的层数，默认是1。
      ```js
      const arr = [1, 2, [3, 4], [[5, 6]]];
      console.log(arr.flat(2)); // [1, 2, 3, 4, 5, 6]
      ```
      上面的代码中，`flat()`传了一个`2`为参数，表示要拉平两层的嵌套数组。

      当数组不管有多少层嵌套，都要转成一维数组时，可以使用`Infinity`关键字作为参数。
      ```js
      const arr = [1, 2, [3, 4], [[5, [6]], [[[[7]]]]]];
      console.log(arr.flat(Infinity)); // [1, 2, 3, 4, 5, 6]
      ```

      如果说原数组有空位的话，`flat()`方法会跳过空位。
      ```js
      const arr = [1, 2, ,[3, 4], ,];
      console.log(arr.flat(Infinity)); // [1, 2, 3, 4]
      ```

      `flatMap()`方法对原数组的每一个成员执行一个函数（就相当于`map()`方法），然后对返回值组成的数组执行`flat()`方法。
      `flatMap()`方法也是返回一个新数组，不会改变原数组。
      ```js
      const arr = [2, 4, 6, 8];
      console.log(arr.flatMap(x => [x, x * 2])) // [2, 4, 4, 8, 6, 12, 8, 16]
      ```
      上面的代码就相当于[[2, 4], [4, 8], [6, 12], [8, 16]].flat()。

      `flatMap()`只能展开一层数组。
      ```js
      const arr = [1, 2, 3, 4];
      console.log(arr.flatMap((x) => [[x * 2]])); // [[2], [4], [6], [8]]
      ```
      上面的代码中，遍历函数返回的是一个双层的数组，注意，默认只展开一层，因此`flatMap()`返回的还是一个嵌套数组。

      `flatMap()`方法的参数是一个遍历函数，这个函数可以接受三个参数，分别是当前数组成员、当前数组成员的位置（从零开始）、原数组。
      ```js
      const arr1 = [1, 2, 3, 4];
      const arr2 = [5, 6]
      console.log(arr1.flatMap((x) => ( arr2.map(o => [x, o]) )));
      // [[1, 5], [1, 6], [2, 5], [2, 6], [3, 5], [3, 6], [4, 5], [4, 6]]
      ```
      
      `flatMap()`方法还支持传第二个参数，用来绑定遍历函数里面的`this`。
    */
  </script>
</body>
</html>