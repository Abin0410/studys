<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
</head>
<body>
  <script>
    /*
      ## 基本用法
      `async`函数返回一个Promise对象，可以使用`then`方法添加回调函数。当函数执行的时候，遇到`await`就会先返回，等到
      异步操作完成，再接着执行函数体内后面的语句。

      来看个例子，指定多少毫秒后输出一个值。
      ```js
      function timeout(ms) {
        return new Promise((resolve) => {
          setTimeout(resolve, ms);
        });
      };

      async function asyncPrint(value, ms) {
        await timeout(ms);
        console.log(value);
      }

      asyncPrint('hello, world', 50);
      ```
      上面代码指定50毫秒以后，输出`hello world`。

      由于`async`函数返回的是Promise对象，可以作为`await`命令的参数。所以，上面的例子也可以写成下面的形式。
      ```js
      async function timeout(ms) {
        await new Promise((resolve) => {
          setTimeout(resolve, ms);
        });
      }

      async function asyncPrint(value, ms) {
        await timeout(ms);
        console.log(value);
      }

      asyncPrint('hello world', 50);
      // hello world
      ```
      async函数有多种使用形式。
      ```js
      // 函数声明
      async function foo() { };

      // 函数表达式
      const foo = async function() { };

      // 对象的方法
      let obj = { async foo() { } };
      obj.foo().then();

      // Class方法
      class Storage {
        constructor() {
          this.cachePromise = caches.open('avatars');
        }

        async getAvatar(name) {
          const cache = await this.cachePromise;
          return cache.match(`/avatars/${name}.jpg`);
        }
      }

      const storage = new Storage();
      storage.getAvatar('jake').then();
      
      // 箭头函数
      const foo = async () => { };
      ```
    */
    
  </script>
</body>
</html>