<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>表单脚本</title>
  
</head>
<body>
  <form id="myForm">
    <input type="text" name="tel1" id="txtTel1" maxlength="3"><br>
    <input type="text" name="tel2" id="txtTel2" maxlength="4"><br>
    <input type="text" name="tel3" id="txtTel3" maxlength="4"><br>
    <input type="submit" value="Submit From" name="submit">
    <input type="email" name="email">
    <input type="url" name="homepage">
    <input type="text" min="0" max="100" step="5" name="count">
  </form>
  <input type="text" id="textTel4">
  <script>
    /**
      ## 表单的基础知识
      在HTML中，表单是有<form>元素来表示的，而在JavaScript中，表单对应的则是HTMLForm-
      Element类型。HTMLFormElement继承了HTMLElement，因而与其他HTML元素具有相同的默认
      属性。不过，HTMLFormElement也有它自己下列独有的属性和方法。
      * acceptCharset：服务器能够处理的字符集；等价于HTML中的accept-charset特性。
      * action：接受请求的URL；等价于HTML中的action特性。
      * elements：表单中所有控件的集合（HTMLCollection）。
      * enctype：请求的编码类型；等价于HTML中的enctype特性。
      * length：表单中控件的数量。
      * method：要发送的HTTP请求类型，通常是"get"或"post"；等价于HTML的method特性。
      * name：表单的名称；
      * reset()：将所有表单域重置为默认值。
      * submit()：提交表单。
      * target：用于发送请求和接收响应的窗口名称；等价于HTML的target特性。
      
      取得`<form>`元素引用的方式有好几种，最常见的方式就是将它看成与其他元素一样，为其
      添加id特性，然后再使用getElementById()方法找到它。
      ```js
      var form = document.getElementById("form1");
      ```
      ### 提交表单
      用户单击提交按钮或图像按钮时，就会提交表单。使用`<input>`或`<button>`都可以定义提交按钮，
      只要将其type特性的值设置为"submit"即可，而图像按钮则是通过将`<input>`的type特性值设置为
      "image"来定义的。看下面的例子：
      ```html
      <!-- 通用提交按钮 -->
      <input type="submit" value="Submit From">

      <!-- 自定义提交按钮 -->
      <button type="submit">Submit From</button>

      <!-- 图像按钮 -->
      <input type="image" src="graphic.gif">
      ```
      只要表单中存在上面列出的任何一种按钮，那么在相应表单控件拥有焦点的情况下，按回车键就可以
      提交该表单。（textarea是一个例外，在文本区中回车会换行）。如果表单里没有提交按钮，按回车
      键不会提交表单。

      以这种方式提交表单时，浏览器会在将请求发送给服务器之前触发submit事件。这样，我们就有机会
      验证表单数据，并据以决定是否允许表达提交。阻止这个事件的默认行为就可以取消表单提交。例如：
      ```js
      var form = document.getElementById("myForm");

      form.addEventListener("submit", function(event){
        console.log(event);
        // 阻止默认事件
        event.preventDefault();
      }, false)
      ```
      调用preventDefault()方法阻止了表单提交。一般来说，在表单数据无效而不能发送给服务器时，可以使用。

      在JavaScript中，以编程方式调用submit()方法也可以提交表单。而且，这种方式无需表单包含
      按钮，任何时候都可以正常提交表单。来看一个例子：
      ```js
      var form = document.getElementById("myForm");
      var btn = document.getElementById("myBtn");

      btn.onclick = function(event) {
        form.submit();
        console.log("进入");
      }
      ```
      在以调用submit()方法的形式提交表单时，不会触发submit事件，因此要记得在调用此方法之前
      先验证表单数据。

      提交表单时出现的最大问题，就是重复提交表单。解决这一问题的办法有两个：在第一次提交表单
      后就禁用提交按钮，或者利用onsubmit事件取消后续的表单提交操作。

      ### 重置表单
      在用户单击重置按钮时，表单会被重置。使用type特性值为"reset"的`<input>`或`<button>`都
      可以创建重置按钮，如下面的例子所示。
      ```html
      <!-- 通用重置按钮 -->
      <input type="reset" value="Reset Form">

      <!-- 自定义重置按钮 -->
      <button type="reset">Reset Form</button>
      ```
      这两个按钮都可以用来重置表单。在重置表单时，所有表单字段都会恢复到页面刚加载完毕时的初
      始值。如果某个字段的初始值为空，就会恢复为空；而带有默认值的字段，也会恢复为默认值。

      用户单击重置按钮重置表单时，会触发reset事件。利用这个机会，我们可以在必要时取消重置操
      作。例如，下面展示了阻止重置表单的代码。
      ```js
      var form = document.getElementById("myForm");

      form.addEventListener("reset", function(event) {
        // 阻止表单重置
        event.preventDefault();
      }, false)
      ```
      与提交表单一样，也可以通过JavaScript来重置表单，如下面的例子所示。
      ```js
      var form = document.getElementById("myForm");
      var reset = document.getElementById("myReset");

      reset.onclick = function(event) {
        form.reset();
      }
      ```
      与调用submit()方法不同，调用reset()方法会像单击重置按钮一样触发reset事件。
      ### 表单字段
      可以像访问页面中的其他元素一样，使用原生DOM方法访问表单元素。此外，每个表单都有
      elements属性，该属性是表单中所有表单元素的集合。这个elements集合是一个有序列表，
      其中包含着表单中的所有字段。每个表单字段在elements集合中的顺序，与它们出现在标记
      中的顺序相同，可以按照位置和name特性来访问它们。看一个例子：
      ```js
      var form = document.getElementById("myForm");
      console.log(form.elements);
      // 取得表单中的第一个字段
      var input1 = form.elements[0];
      console.log(input1);

      // 取得名为"UserPhone"的字段
      var input2 = form.elements["UserPhone"];
      console.log(input2);

      // 取得表单中包含的字段的数量
      var inputCount = form.elements.length;
      console.log(inputCount);
      ```
      如果有多个表单控件都在使用一个name，那么就会返回该name命名的一个NodeList。例如，
      以下面的HTML代码片段为例：
      ```html
      <form id="myForm">
        <ul>
          <li><input type="radio" name="color" value="red"></li>
          <li><input type="radio" name="color" value="green"></li>
          <li><input type="radio" name="color" value="blue"></li>
        </ul>
      </form>
      ```
      在这个HTML表单中，有3个单选按钮，它们的name都是"color"，意味着这3个字段是一起的。
      在访问elements["color"]时，就会返回一个NodeList，其中包含这3个元素；不过，如果
      访问elements[0]，则只会返回第一个元素。来看下面的例子：
      ```js
      var form = document.getElementById("myForm");

      var colorFields = form.elements["color"];
      console.log(colorFields.length); // 3

      var firstColorField = colorFields[0];
      var firstFormField = form.elements[0];
      console.log(firstColorField === firstFormField); // true
      ```
      以上代码显示，通过form.elements[0]访问到的第一个表单字段，与包含在form.elements
      ["color"]中的第一个元素相同。

      #### 共有的表单字段属性
      除了`<fieldset>`之外，所有表单字段都拥有相同的一组属性。由于`<input>`类型可以表
      示多中表单字段，因此有些属性只适用于某些字段，但还有一些属性是所有字段所共有的。
      表单字段共有的属性如下。
      * disabled：布尔值，表示当前字段是否被禁用
      * form：指向当前字段所属表单的指针；只读。
      * name：当前字段的名称。
      * readOnly：布尔值，表示当前字段是否只读。
      * tabIndex：当前字段的类型，如"checkbox"、"radio"等等。
      * value：当前字段将被提交给服务器的值。对文件字段来说，这个属性是只读的，包括文件在计算机中的路径。

      除了form属性之外，可以通过JavaScript动态修改其他任何属性。看下面的例子：
      ```js
      var form = document.getElementById("myForm");
      var input = form.elements[0];

      // 修改value属性
      input.value = "Another value";

      // 检查form属性的值
      console.log(input.form === form);

      // 把焦点设置到当前字段
      input.focus();

      // 禁用当前字段
      input.disabled = true;

      // 修改type属性（不推荐）
      input.type = "checkbox";
      ```
      能够动态修改表单字段属性，意味着我们可以在任何时候，以任何方式来动态操作表单。例如，很
      多用户可能会重复单击表单的提交按钮。最常见的解决方案，就是在第一次单击后就禁用提交按钮。
      只要侦听submit事件，并在该事件发生时禁用提交按钮即可。来看一个例子。
      ```js
      var form = document.getElementById("myForm");
      form.addEventListener("submit", function(event) {
        var target = event.target;
        console.log(target.elements["submit"]);

        // 取得提交按钮
        var btn = target.elements["submit"];

        // 禁用它
        btn.disabled = true;

        // 阻止默认事件
        event.preventDefault();
      }, false)
      ```
      以上代码为表单的submit事件添加了一个事件处理程序。事件触发后，代码取得了提交按钮并将
      其disabled属性设置为true。但不能通过onclick事件来实现这个功能，因为不同浏览器之间的
      差异：有的浏览器会在触发表单的submit事件之前触发click事件，而有的浏览器则相反。对于
      先触发click事件的浏览器，意味着会在提交发生之前禁止按钮，结果永远都不会提交表单。最
      好是通过submit事件来禁用提交按钮。不过，这种方式不适合表单中不包含提交按钮的情况。
      只有在包含提交按钮的情况下，才有可能触发表单的submit。

      #### 共有的表单字段方法
      每个表单字段都有两个方法： **focus()和blur()** 。focus()方法，可以将用户的注意力吸
      引到页面中的某个部位。例如，在页面加载完毕后，将焦点转移到表单中的第一个字段。
      ```js
      window.addEventListener("load", function(event) {
        document.forms[0].elements[0].focus();
      }, false);
      ```
      HTML5为表单新增了一个 **autofocus** 属性。在支持这个属性的浏览器中，只要设置这个属性，
      不用JavaScript就能自动把焦点移动到相应字段。例如：
      ```html
      <input type="text" autofocus>
      ```
      与 **focus()** 方法相对的是 **blur()** 方法，它的作用是从元素中移走焦点。
      ```js
      document.forms[0].elements[0].blur();
      ```
      **change** 事件对于`<input>`和`<textarea>`元素，在它们失去焦点且value值改变时触发；
      对于`<select>`元素，在其选项改变时触发。

      ## 文本框脚本
      在HTML中，有两种方式来表现文本框：一种是使用`<input>`元素的单行文本框，另一种是使用`<textarea>`
      的多行文本框。
      ### 选择文本
      在文本框获得焦点时选择其所有文本，这是一种非常常见的做法。来看下面的例子：
      ```js
      var textbox = document.forms[0].elements["textbox1"];
      textbox.addEventListener("focus", function(event){
        var target = event.target;
        target.select();
      }, false);
      ```
      #### 取得选择的文本
      虽然通过select事件我们可以知道用户什么时候选择了文本，但仍然不知道用户选择了什么文本。
      HTML通过一些扩展解决了这个问题，以便更顺利地取得选择的文本。该规范采用的办法是添加两个
      属性：selectionStart和selectionEnd。
      ```js
      function getSelectedText(textbox) {
        return textbox.value.substring(textbox.selectionStart, textbox.selectionEnd);
      }
      ```
      #### 选择部分文本
      HTML5也为选择文本框中的部分文本提供了解决方案。除了select()方法之外，所有文本都有一个
      setSelectionRange()方法。这个方法接收两个参数：要选择的第一个字符的引索和要选择的最后
      一个字符之后的字符的引索。来看一个例子：
      ```js
      var textbox = document.forms[0].elements["textbox1"];
      textbox.value = "Hello world！";

      // 文本框获取焦点
      textbox.select();

      // 选择所有文本
      var value1 = textbox.setSelectionRange(0, textbox.value.length);

      // 选择前3个字符
      textbox.setSelectionRange(0, 3);

      // 选择第4到第6个字符
      textbox.setSelectionRange(4, 7);
      ```
      要看到选择的文本框，必须在调用setSelectionRange()之前或之后立即将焦点设置到文本框。

      ### 过滤输入
      我们经常会要求用户在文本框中输入特定的数据，或者输入特定的格式的数据。例如，包含某些
      字符，或者必须匹配某种模式。
      #### 屏蔽字符
      有时候，我们需要用户输入的文本中包含或不包含某些字符。例如，电话号码中不能包含非数值字。
      ```js
      var phone = document.getElementById("userPhone");

      phone.addEventListener("keypress", function(event) {
        event = event ? event : window.event;
        var target = event.target || event.srcElement;
        var charCode = event.charCode;

        if (!/\d/.test(String.fromCharCode(charCode))) {
          event.preventDefault();
        }
      }, false)
      ```
      这个例子中，我们实现了对用户在输入框中，只允许输入数字。

      ### 自动切换焦点
      使用JavaScript可以从多个方面增强表单字段的易用性。其中，最常见的一种方式就是在用户填
      写完当前字段时，自动将焦点切换到下一个字段。

      为增强易用性，同时加快数据输入，可以在前一个文本框中的字符达到最大数量后，自动将焦点切
      换到下一个文本框。
      ```js
      (function() {

        function tabForward(event) {
          event = event ? event : window.event;
          var target = event.target;

          if (target.value.length == target.maxLength) {
            var form = target.form;

            for (var i = 0, len = form.elements.length; i < len; i++) {
              if (form.elements[i] == target) {
                if (form.elements[i + 1]) {
                  form.elements[i + 1].focus();
                }
                return;
              }
            }
          }
        }

        var textbox1 = document.getElementById("txtTel1"),
            textbox2 = document.getElementById("txtTel2"),
            textbox3 = document.getElementById("txtTel3");

        textbox1.addEventListener("keyup", tabForward);
        textbox2.addEventListener("keyup", tabForward);
        textbox3.addEventListener("keyup", tabForward);
      })();
      ```
      ### HTML5约束验证API
      为了在将表单提交到服务器之前验证数据，HTML5新增了一些功能。有了这些功能，即便JavaScript
      被禁用或者由于种种原因未能加载，也可以确保基本的验证。

      只有在某些情况下表单字段才能进行自动验证。具体来说，就是要在HTML标记中为特定的字段指定一
      些约束，然后浏览器才会自动执行表单验证。

      #### 必填字段
      第一种情况是在表单字段中指定了required属性，如下面的例子所示：
      ```html
      <input type="text" required name="username">
      ```
      任何标注有required的字段，在提交表单时都不能空着。这个属性适用于`<input>、<textarea>`
      和`<select>字段`。

      #### 其他输入类型
      HTML5为`<input>`元素的type属性又新增了几个值。这些新的类型不仅能反映数据类型的信息，
      而且还能提供一些默认的验证功能。"email"和"url"是两个得到支持最多的类型。例如：
      ```html
      <input type="email" name="email">
      <input type="url" name="homepage">
      ```
      #### 数值范围
      对所有这些数值类型的输入，可以指定min属性（最小的可能值）、max属性（最大的可能值）和
      step属性（从min到max的两个刻度间的差值）。
      ```js
      <input type="text" min="0" max="100" step="5" name="count">
      ```
      此外，还有两个方法：stepUp()和stepDown()，都接收一个可选的参数：要在当前值基础上加上
      或减去的值。（默认是加或减。）
    **/
    var textbox = document.getElementById("textTel4");
    textbox.stepUp(); // 加1
    textbox.stepUp(5); // 加5
    textbox.stepDown(); // 减1
    textbox.stepDown(10); // 减10
  </script>
</body>
</html>