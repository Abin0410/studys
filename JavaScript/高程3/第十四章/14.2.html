<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title></title>
</head>
<body>
  <script>
    /**
      ## 文本框脚本
      在HTML中，有两种方式来表现文本框：一种是使用`<input>`元素的单行文本框，另一种是使用`<textarea>`
      的多行文本框。

      ### 选择文本
      在文本框获得焦点时选择其所有文本，这是一种非常常见的做法。来看下面的例子：
      ```js
      var textbox = document.forms[0].elements["textbox1"];
      textbox.addEventListener("focus", function(event){
        var target = event.target;
        target.select();
      }, false);
      ```
      
      #### 取得选择的文本
      虽然通过select事件我们可以知道用户什么时候选择了文本，但仍然不知道用户选择了什么文本。
      HTML通过一些扩展解决了这个问题，以便更顺利地取得选择的文本。该规范采用的办法是添加两个
      属性：selectionStart和selectionEnd。
      ```js
      function getSelectedText(textbox) {
        return textbox.value.substring(textbox.selectionStart, textbox.selectionEnd);
      }
      ```
      #### 选择部分文本
      HTML5也为选择文本框中的部分文本提供了解决方案。除了select()方法之外，所有文本都有一个
      setSelectionRange()方法。这个方法接收两个参数：要选择的第一个字符的引索和要选择的最后
      一个字符之后的字符的引索。来看一个例子：
      ```js
      var textbox = document.forms[0].elements["textbox1"];
      textbox.value = "Hello world！";

      // 文本框获取焦点
      textbox.select();

      // 选择所有文本
      var value1 = textbox.setSelectionRange(0, textbox.value.length);

      // 选择前3个字符
      textbox.setSelectionRange(0, 3);

      // 选择第4到第6个字符
      textbox.setSelectionRange(4, 7);
      ```
      要看到选择的文本框，必须在调用setSelectionRange()之前或之后立即将焦点设置到文本框。

      ### 过滤输入
      我们经常会要求用户在文本框中输入特定的数据，或者输入特定的格式的数据。例如，包含某些
      字符，或者必须匹配某种模式。
      #### 屏蔽字符
      有时候，我们需要用户输入的文本中包含或不包含某些字符。例如，电话号码中不能包含非数值字。
      ```js
      var phone = document.getElementById("userPhone");

      phone.addEventListener("keypress", function(event) {
        event = event ? event : window.event;
        var target = event.target || event.srcElement;
        var charCode = event.charCode;

        if (!/\d/.test(String.fromCharCode(charCode))) {
          event.preventDefault();
        }
      }, false)
      ```
      这个例子中，我们实现了对用户在输入框中，只允许输入数字。

      ### 自动切换焦点
      使用JavaScript可以从多个方面增强表单字段的易用性。其中，最常见的一种方式就是在用户填
      写完当前字段时，自动将焦点切换到下一个字段。

      为增强易用性，同时加快数据输入，可以在前一个文本框中的字符达到最大数量后，自动将焦点切
      换到下一个文本框。
      ```js
      (function() {

        function tabForward(event) {
          event = event ? event : window.event;
          var target = event.target;

          if (target.value.length == target.maxLength) {
            var form = target.form;

            for (var i = 0, len = form.elements.length; i < len; i++) {
              if (form.elements[i] == target) {
                if (form.elements[i + 1]) {
                  form.elements[i + 1].focus();
                }
                return;
              }
            }
          }
        }

        var textbox1 = document.getElementById("txtTel1"),
            textbox2 = document.getElementById("txtTel2"),
            textbox3 = document.getElementById("txtTel3");

        textbox1.addEventListener("keyup", tabForward);
        textbox2.addEventListener("keyup", tabForward);
        textbox3.addEventListener("keyup", tabForward);
      })();
      ```
      ### HTML5约束验证API
      为了在将表单提交到服务器之前验证数据，HTML5新增了一些功能。有了这些功能，即便JavaScript
      被禁用或者由于种种原因未能加载，也可以确保基本的验证。

      只有在某些情况下表单字段才能进行自动验证。具体来说，就是要在HTML标记中为特定的字段指定一
      些约束，然后浏览器才会自动执行表单验证。

      #### 必填字段
      第一种情况是在表单字段中指定了required属性，如下面的例子所示：
      ```html
      <input type="text" required name="username">
      ```
      任何标注有required的字段，在提交表单时都不能空着。这个属性适用于`<input>、<textarea>`
      和`<select>字段`。

      #### 其他输入类型
      HTML5为`<input>`元素的type属性又新增了几个值。这些新的类型不仅能反映数据类型的信息，
      而且还能提供一些默认的验证功能。"email"和"url"是两个得到支持最多的类型。例如：
      ```html
      <input type="email" name="email">
      <input type="url" name="homepage">
      ```
      #### 数值范围
      对所有这些数值类型的输入，可以指定min属性（最小的可能值）、max属性（最大的可能值）和
      step属性（从min到max的两个刻度间的差值）。例如，想让用户只能输入0到100的值，而且这个
      值必须是5的倍数。代码如下：
      ```js
      <input type="text" min="0" max="100" step="5" name="count">
      ```
      #### 输入模式
      HTML5为文本字段新增了pattern属性。这个属性的值是一个正则表达式，用于匹配文本框中的值。
      例如，如果只想允许在文本字段中输入数值，可以像下面的代码一样。
      ```html
      <input type="text" pattern="\d+" name="count" id="count">
      ```
      指定pattern也不能阻止用户输入无效的文本。这个模式应用给值，浏览器来判断值是否有效。

      #### 检测有效性
      使用checkValidity()方法可以检测表单中的某个字段是否有效。所有表单字段都个方法，如果
      字段的值有效，这个方法返回true，否则返回false。看下面的例子：
      ```html
      <input type="number" id="checkNumber" min="0" max="100" step="5" required>
      <button type="button" onclick="myFunction()">Click Me</button>
      ```
      ```js
      function myFunction() {
        var checkInput = document.getElementById("checkNumber");
        if (checkInput.checkValidity()) {
          // 字段有效继续
          alert("有效")
        } else {
          // 字段无效
          alert("无效")
        } 
      }                                                     
      ```
      这个例子中，如果输入一个不是5的倍数，就会出现无效字段的弹框。

      #### 禁用验证
      通过设置novalidate属性，可以告诉表单不进行验证。
      ```html
      <form method="post" novalidate>
        <!-- 这里插入表单元素 -->
      </form>
      ```
    **/
  </script>
</body>
</html>