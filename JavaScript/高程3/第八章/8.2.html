<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>location对象</title>
  <script>
    /**
      location是最有用的BOM对象之一，它提供了与当前窗口中加载的文档有关的信息，还提供了一
      些导航功能。事实上，location对象是很特别的一个对象，因为它既是window对象的属性，也是
      document对象的属性；换句话说，window.location和document.location引用的是同一个对象
      location对象的用处不只表现在它保存着当前文档的信息，还表现在它将URL解析为独立的片段，
      让开发人员可以通过不同的属性访问这些片段。下面列出了location对象的所有属性（注：省略了
      每个属性前面的location前缀）。
        hash：例子："#contents" 说明：返回URL中的hash（#号后跟零活多个字符串），如果URL中
              不包含散列，则返回空字符串
        host：例子："www.baidu.com:80" 说明：返回服务器名称和端口号（如果有）
        hostname：例子："www.baidu.com" 说明：返回不带端口号的服务器名称
        href：例子："https://www.baidu.com" 说明：返回当前加载页面的完整URL。而location
              对象的toString()方法也返回这个值
        pathname：例子："/WileyCDA/" 说明：返回URL中的目录和（或）文件名
        port：例子："8080" 说明：返回URL中指定的端口号。如果URL中不包含端口号，则这个属性
              返回空字符串
        protocol：例子："http:" 说明：返回页面使用的协议。通常是http:或https:
        search：例子："?q=javascript" 说明：返回URL的查询字符串。这个字符串以问号开头

      查询字符串参数
      虽然通过上面的属性可以访问到location对象的大多数信息，但其中访问URL包含的查询字符串的
      属性并不方便。尽管location.search返回从问号到URL末尾的所有内容，但却没有办法逐个访问
      其中的每个查询字符串参数。为此，可以像下面这样创建一个函数，用以解析查询字符串，然后返
      回包含所有参数的一个对象：

        function getQueryStringArgs() {
          // 取得查询字符串并去掉开头的问号
          var qs = (location.search.length > 0 ? location.search.substring(1) : ""),

          // 保存数据的对象
          args = {},

          // 取得每一项
          items = qs.length ? qs.split("&") : [],
          item = null,
          name = null,
          value = null,

          // 在for循环中使用
          i = 0,
          len = items.length;

          // 逐个将每一项添加到args对象中
          for (i = 0; i < len; i++) {
            item = items[i].split("=");
            name = decodeURIComponent(item[0]);
            value = decodeURIComponent(item[1]);

            if (name.length) {
              args[name] = value;
            }
          }

          return args;
        }

      这个函数的第一步是先去掉查询字符串开头的问号。当然，前提是location.search中必须要包含
      一或多个字符。然后，所有参数将被保存在args对象中，该对象以字面量形式创建。接下来，根据
      和号（&）来分割查询字符串，并返回name=value格式的字符串数组。下面的for循环会迭代这个数
      组，然后再根据等于号分割每一项，从而返回第一项为参数名，第二项为参数值的数组。再使用
      decodeURIComponent()分别解码name和value（因为查询字符串应该是被编码过的）。最后，将
      name作为args对象的属性，将value作为相应属性的值。下面给出了使用这个函数的示例。

        // 假设查询字符串是?q=javascript&num=10
        var args = getQueryStringArgs();
        console.log(args["q"]); // javascript
        console.log(args["num"]); // 10

      可见，每个查询字符串参数都成了返回对象的属性。这样就极大地方便了对每个参数的访问。

      位置操作
      使用location对象可以通过很多方式来改变浏览器的位置。首先，也是最常用的方式，就是使用
      assign()方法并为其传递一个URL，如下所示。

        location.assign("https://www.baidu.com");

      这样，就可以立即打开新URL并在浏览器的历史记录中生成一条记录。如果是将location.href或
      window.location设置一个URL值，也会以该值调用assign()方法。例如，下列两行代码与显式
      调用assign()方法的效果完全一样。

        window.location = "https://www.baidu.com";
        location.href = "https://www.baidu.com";

      在这些改变浏览器位置的方法中，最常用的是设置location.href属性。
      另外，修改location对象的其他属性也可以改变当前加载的页面。下面的例子展示了通过将hash、
      search、hostname、pathname和port属性设置为新值来改变URL。

        // 假设初始URL为http://www.baidu.com/WileyCDA/

        // 将URL修改为"http://www.baidu.com/WileyCDA/#section1"
        location.hash = "#section1";

        // 将URL修改为"http://www.baidu.com/WileyCDA/?q=javascript"
        location.search = "?q=javascript";

        // 将URL修改为"http://www.yahoo.com/WileyCDA/"
        location.hostname = "www.yahoo.com";

        // 将URL修改为"http://www.yahoo.com/mydir/"
        location.pathname = "mydir";

        // 将URL修改为"http://www.yahoo.com:8080/WileyCDA/"
        location.port = 8080;

      每次修改location的属性（hash除外），页面都会以新URL重新加载。
      当通过上述任何一种方式修改URL之后，浏览器的历史记录中就会生成一条新纪录，因此用户通过
      单击"后退"按钮都会导航到前一个页面。要禁用这种行为，可以使用replace()方法。这个方法只
      接受一个参数，即要导航到的URL；结果虽然会导致浏览器位置改变，但不会在历史记录中生成新
      记录。在调用replace()方法之后，用户不能回到前一个页面，来看下面的例子：

        setTimeout(function() {
          location.replace("https://www.baidu.com");
        },1000);

      如果将这个页面加载到浏览器中，浏览器就会在1秒钟后重新定向到www.baidu.com。然后，"后退"
      按钮将处于禁用状态，如果不重新输入完整的URL，则无法返回示例页面。

      与位置有关的最后一个方法是reload()，作用是重新加载当前显示的页面。如果调用reload()时不
      传递任何参数，页面就会以最有效的方式重新加载。也就是说，如果页面上次请求以来并没有改变过，
      页面就会从浏览器缓存中重新加载。如果要强制从服务器重新加载，则需要像下面这样为该方法传递
      参数true。

        location.reload(); // 重新加载（有可能从缓存中加载）
        location.reload(true); // 重新加载（从服务器重新加载）

      位于reload()调用之后的代码可能会也可能不执行，这要取决于网络延迟或系统资源等因素。为此，
      最好将reload()放在代码的最后一行。

    */
    
  </script>
</head>
<body>
  
</body>
</html>