<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>内存和性能</title>
</head>
<body>
  <ul id="myLinks">
    <li id="goSomewhere">Go somewhere</li>
    <li id="doSomething">Do something</li>
    <li id="sayHi">Say Hi</li>
  </ul>
  <script>
    /**
    内存和性能
    在JavaScript中，添加到页面上的事件数量将直接关系到页面的整体运行性能。导致这一问题
    的原因是多方面的。首先，每个函数都是对象，都会占用内存；内存中的对象越多，性能就会越
    差。其次，必须事先指定所有事件而导致的DOM访问次数，会延迟整个页面的交互就绪时间。

    事件委托
    事件委托利用了事件冒泡，只指定一个事件处理程序，就可以管理某一类型的所有事件。

      <ul id="myLinks">
        <li id="goSomewhere">Go somewhere</li>
        <li id="doSomething">Do something</li>
        <li id="sayHi">Say Hi</li>
      </ul>

      var list = document.getElementById("myLinks");
      list.onclick = function(event) {
        switch (event.target.id) {
          case "goSomewhere":
            alert("Hello JavaScript");
            break;
          case "doSomething":
            alert("Hello xiaoli");
            break;
          case "sayHi":
            alert("Hello world");
            break;
        }
      }

    事件委托的优点：
      在页面中设置事件所需的时间更少，只要添加一个事件所需的DOM引用更少，所花的时间也更少。
      内存空间占用少，减少事件的注册。

    事件委托的局限：
    虽然mouseover和mouseout事件也冒泡，但要适当处理它们并不容易，而且经常需要计算元素的位置。

    移除事件处理程序
    如果你知道某个元素即将被移除，那么最好手工移除事件。比如，将按钮的事件设置为null。这样就
    能确保了内存可以被再次利用。
    移除事件最好的做法是在页面卸载之前，先通过onunload事件移除所有事件。事件委托再次表现它的
    优势----需要跟踪的事件越少，移除它们就越容易。
    **/
    var list = document.getElementById("myLinks");
    list.onclick = function(event) {
      switch (event.target.id) {
        case "goSomewhere":
          alert("Hello JavaScript");
          break;
        case "doSomething":
          alert("Hello xiaoli");
          break;
        case "sayHi":
          alert("Hello world");
          break;
      }
    }
  </script>
</body>
</html>